<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>theFirstReactProject</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/index.css" />
		<link rel="stylesheet" href="css/footer.css" />
		<link rel="stylesheet" href="css/style.css" />
		<script type="text/javascript" src="js/jquery-1.11.1.min.js" ></script>
		<script type="text/javascript" src="js/bootstrap.min.js" ></script>
		<script src="/js/underscore-noflect.js"></script>
	</head>
		<body>
		<% include header.ejs%>
		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
			<ol class="carousel-indicators">
						<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
						<li data-target="#carousel-example-generic" data-slide-to="1"></li>
						<li data-target="#carousel-example-generic" data-slide-to="2"></li>
						<li data-target="#carousel-example-generic" data-slide-to="3"></li>
					</ol>
					<div class="carousel-inner" role="listbox">
						<div class="item active">
							<img src="img/slideShow1.jpg" alt="1">
							<div class="container">
								<div class="carousel-caption">
									<h1>培训记录</h1>
									<p>Training records</p>
									<p>
										<a class="btn btn-lg btn-primary" href="message" target="_blank" role="button">点我了解</a>
									</p>
								</div>
							</div>
						</div>
						<div class="item">
							<img src="img/slideShow2.jpg" alt="2">
							<div class="container">
								<div class="carousel-caption">
									<h1>报表情况</h1>
									<p>Case report</p>
									<p>
										<a class="btn btn-lg btn-primary" href="table" target="_blank" role="button">点我了解</a>
									</p>
								</div>
							</div>
						</div>
						<div class="item">
							<img src="img/slideShow3.jpg" alt="3">
							<div class="container">
								<div class="carousel-caption">
									<h1>资料管理</h1>
									<p>Data management</p>
									<p>
										<a class="btn btn-lg btn-primary" href="search" target="_blank" role="button">点我了解</a>
									</p>
								</div>
							</div>
						</div>
						<div class="item">
							<img src="img/slideShow4.jpg" alt="4">
							<div class="container">
								<div class="carousel-caption">
									<h1>课程管理</h1>
									<p>Course management</p>
									<p>
										<a class="btn btn-lg btn-primary" href="taskArea" role="button">点我了解</a>
									</p>
								</div>
							</div>
						</div>
					</div>
					<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>

				<!--主要内容-->
				<div class="container summary">
					<div class="task-area-title">
						<img class="info-img" src="img/info.png" />
						新消息发布啦~
					</div>
					<hr class="divider" />
					<div class="row">
						<div class="col-md-3 task-area">
							<img src="img/lesson.png" class="img-circle" alt="teacher-head-img" />
							<h2>培训记录</h2>
							<div class="">
								<p>教师：<%= username%></p>
								<p>相关培训记录</p>
							</div>
							<p class="task-enter-btn">
								<a class="btn btn-danger" href="message" role="button">点击进入</a>
							</p>
						</div>
						<div class="col-md-3 task-area">
							<img src="img/table.png" class="img-circle" alt="chrome" />
							<h2>报表情况</h2>
							<div class="">
								<p>教师：<%= username %></p>
								<p>相关报表情况</p>
							</div>
							<p class="task-enter-btn">
								<a class="btn btn-danger" href="table" role="button">点击进入</a>
							</p>
						</div>
						<div class="col-md-3 task-area">
							<img src="img/resource.png" class="img-circle" alt="chrome" />
							<h2>资料管理</h2>
							<div class="">
								<p>教师：<%=username%></p>
								<p>相关资料管理</p>
							</div>
							<p class="task-enter-btn">
								<a class="btn btn-danger" href="search" role="button">点击进入</a>
							</p>
						</div>
						<div class="col-md-3 task-area">
							<img src="img/class.png" alt="chrome" class="img-circle" />
							<h2>课程管理</h2>
							<div class="">
								<p>教师：<%=username%></p>
								<p>相关课程管理</p>
							</div>
							<p class="task-enter-btn">
								<a class="btn btn-danger" href="taskArea" role="button">点击进入</a>
							</p>
						</div>
					</div>
					<hr class="divider" />
					<div class="task-area-title">
						<img class="info-img" src="img/video.png" />
						精品课程
					</div>
					<div class="row lessonAreaForm" id="lessonArea">
					</div>
					<!--<hr class="divider" />-->
					<div class="task-area-title">
						<img class="info-img" src="img/video.png" />
						推荐课程
					</div>
					<div class="row lessonAreaForm" id="lessonArea2">
					</div>
					<!--<hr class="divider" />-->
					<div class="task-area-title">
						<img class="info-img" src="img/video.png" />
						热门课程
					</div>
					<div class="row lessonAreaForm" id="lessonArea3">
					</div>

					<!--<footer>-->
						<!--<p class="pull-right">-->
							<!--<a href="#top">回到顶部</a>-->
						<!--</p>-->
						<!--<p class="pull-left">&copy; 成都师范学院</p>-->
					<!--</footer>-->
				</div>
        <% include footer.ejs%>
	<script type="text/template" id="lessonTemplate">
		<div class="col-sm-6 col-md-3">
			<div class="thumbnail">
				<img src="{{=lessonImg}}" alt="...">
				<div class="caption">
					<h3>{{=lessonTitle}}</h3>
					<span class="glyphicon glyphicon-stats"></span><strong>{{=lessonLevel}}</strong>
					<span class="glyphicon glyphicon-adjust"></span><strong>{{=lessonPopulation}}</strong>
					<p class="lesson-detail">{{=lessonDetail}}</p>
					<a href="{{=lessonPath}}" class="btn btn-primary" role="button" >进入学习</a>
				</div>
			</div>
		</div>
	</script>
	<script type="text/javascript">
        var $lessonArea=$("#lessonArea");
        var $lessonArea2=$("#lessonArea2");
        var $lessonArea3=$("#lessonArea3");
        //得到模板函数
        var compiled=_.template($("#lessonTemplate").html());

        //ajax服务，获取信息
        $.ajax({
            "url":"/js/data/lessonArea1.json",
            "type":"get",
            "success":function (result) {
                //result是一个数组
//                console.log(Array.isArray(result));
//				console.log(result);
                iterator(0);
                //迭代器
                //这里防止ajax异步，必须使用迭代器
                function iterator(i) {
                    if (i == result.length) {
                        //在这里书写请求完毕之后做的事情
                        return;  //不用继续迭代了
                    }
                    console.log(result[i]);
                    //组装模板
                    var htmlstring = compiled(result[i]);
                    //添加DOM
                    $("#lessonArea").append($(htmlstring));
                    iterator(i + 1);
                }
            }
        })
        $.ajax({
            "url":"/js/data/lessonArea2.json",
            "type":"get",
            "success":function (result) {
                //result是一个数组
//                console.log(Array.isArray(result));
//				console.log(result);
                iterator(0);
                //迭代器
                //这里防止ajax异步，必须使用迭代器
                function iterator(i) {
                    if (i == result.length) {
                        //在这里书写请求完毕之后做的事情
                        return;  //不用继续迭代了
                    }
                    console.log(result[i]);
                    //组装模板
                    var htmlstring = compiled(result[i]);
                    //添加DOM
                    $("#lessonArea2").append($(htmlstring));
                    iterator(i + 1);
                }
            }
        })
        $.ajax({
            "url":"/js/data/lessonArea3.json",
            "type":"get",
            "success":function (result) {
                //result是一个数组
//                console.log(Array.isArray(result));
//				console.log(result);
                iterator(0);
                //迭代器
                //这里防止ajax异步，必须使用迭代器
                function iterator(i) {
                    if (i == result.length) {
                        //在这里书写请求完毕之后做的事情
                        return;  //不用继续迭代了
                    }
                    console.log(result[i]);
                    //组装模板
                    var htmlstring = compiled(result[i]);
                    //添加DOM
                    $("#lessonArea3").append($(htmlstring));
                    iterator(i + 1);
                }
            }
        })
	</script>
		</body>
</html>